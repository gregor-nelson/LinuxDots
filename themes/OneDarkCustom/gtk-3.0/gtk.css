/* ============================================
 *  OneDarkCustom â€” GTK 3 Theme
 *  Based on custom One Dark terminal palette
 * ============================================ */

/* --------------- Color Definitions --------------- */

@define-color bg_color         #1E222A;
@define-color bg_darker        #181B21;
@define-color bg_lighter       #282C34;
@define-color bg_hover         #2C313A;
@define-color bg_active        #333842;

@define-color fg_color         #ABB2BF;
@define-color fg_dim           #6B7280;
@define-color fg_bright        #D4D8DF;

@define-color accent_color     #61AFEF;
@define-color accent_hover     #73BAEF;
@define-color accent_active    #4FA3E8;
@define-color accent_fg        #1E222A;

@define-color red              #E06C75;
@define-color green            #7EC7A2;
@define-color yellow           #EBCB8B;
@define-color blue             #61AFEF;
@define-color purple           #C678DD;
@define-color cyan             #6D8DAD;

@define-color border_color     #3A3F4B;
@define-color border_darker    #2E333D;

@define-color warning_color    #EBCB8B;
@define-color error_color      #E06C75;
@define-color success_color    #7EC7A2;

@define-color link_color       #61AFEF;
@define-color link_visited     #C678DD;

@define-color selection_bg     alpha(@accent_color, 0.3);
@define-color selection_fg     #FFFFFF;

@define-color tooltip_bg       #181B21;
@define-color tooltip_fg       #ABB2BF;

@define-color sidebar_bg       #181B21;
@define-color sidebar_fg       #ABB2BF;

@define-color card_bg          #282C34;
@define-color card_border      #3A3F4B;

@define-color scrollbar_bg     alpha(#ABB2BF, 0.15);
@define-color scrollbar_hover  alpha(#ABB2BF, 0.3);


/* --------------- Global Defaults --------------- */

* {
    outline-color: alpha(@accent_color, 0.5);
    -gtk-secondary-caret-color: @accent_color;
}

/* --------------- Window / General --------------- */

window,
.background {
    background-color: @bg_color;
    color: @fg_color;
}

decoration {
    border-radius: 10px;
    box-shadow:
        0 3px 12px rgba(0, 0, 0, 0.45),
        0 0 0 1px @border_darker;
    margin: 8px;
}

decoration:backdrop {
    box-shadow:
        0 2px 8px rgba(0, 0, 0, 0.3),
        0 0 0 1px @border_darker;
}


/* --------------- Header Bar / Title Bar --------------- */

headerbar,
.titlebar {
    background-color: @bg_darker;
    color: @fg_color;
    border-bottom: 1px solid @border_darker;
    padding: 4px 8px;
    min-height: 38px;
}

headerbar:backdrop,
.titlebar:backdrop {
    background-color: @bg_darker;
    color: @fg_dim;
}

headerbar .title,
headerbar .subtitle {
    color: @fg_color;
}

headerbar .subtitle {
    color: @fg_dim;
    font-size: smaller;
}

headerbar:backdrop .title,
headerbar:backdrop .subtitle {
    color: @fg_dim;
}


/* --------------- Buttons --------------- */

button {
    background-color: @bg_lighter;
    color: @fg_color;
    border: 1px solid @border_color;
    border-radius: 6px;
    padding: 5px 14px;
    min-height: 24px;
    transition: all 150ms ease;
}

button:hover {
    background-color: @bg_hover;
    border-color: alpha(@accent_color, 0.4);
}

button:active,
button:checked {
    background-color: @bg_active;
    border-color: @accent_color;
}

button:disabled {
    opacity: 0.45;
}

button:backdrop {
    background-color: @bg_lighter;
    color: @fg_dim;
}

/* Suggested action (primary) buttons */
button.suggested-action {
    background-color: @accent_color;
    color: @accent_fg;
    border-color: transparent;
    font-weight: bold;
}

button.suggested-action:hover {
    background-color: @accent_hover;
    border-color: transparent;
}

button.suggested-action:active {
    background-color: @accent_active;
}

/* Destructive buttons */
button.destructive-action {
    background-color: @red;
    color: @bg_color;
    border-color: transparent;
    font-weight: bold;
}

button.destructive-action:hover {
    background-color: lighter(@red);
}

/* Flat buttons */
button.flat {
    background: transparent;
    border-color: transparent;
}

button.flat:hover {
    background-color: alpha(@fg_color, 0.08);
}

/* Linked buttons */
.linked > button {
    border-radius: 0;
    border-right-width: 0;
}

.linked > button:first-child {
    border-radius: 6px 0 0 6px;
}

.linked > button:last-child {
    border-radius: 0 6px 6px 0;
    border-right-width: 1px;
}

.linked > button:only-child {
    border-radius: 6px;
    border-right-width: 1px;
}


/* --------------- Headerbar Buttons --------------- */

headerbar button,
.titlebar button {
    background-color: transparent;
    border-color: transparent;
}

headerbar button:hover,
.titlebar button:hover {
    background-color: alpha(@fg_color, 0.1);
}

headerbar button:active,
.titlebar button:active {
    background-color: alpha(@fg_color, 0.16);
}


/* --------------- Window Controls (Close/Min/Max) --------------- */

windowcontrols button,
headerbar button.close,
headerbar button.maximize,
headerbar button.minimize {
    min-width: 16px;
    min-height: 16px;
    padding: 2px;
    margin: 2px;
    border-radius: 50%;
    border: none;
}

headerbar button.close {
    background-color: @red;
    color: @bg_color;
}

headerbar button.close:hover {
    background-color: lighter(@red);
}

headerbar button.maximize:hover {
    background-color: alpha(@green, 0.25);
}

headerbar button.minimize:hover {
    background-color: alpha(@yellow, 0.25);
}


/* --------------- Text Entry / Input --------------- */

entry {
    background-color: @bg_darker;
    color: @fg_color;
    border: 1px solid @border_color;
    border-radius: 6px;
    padding: 6px 10px;
    min-height: 24px;
    caret-color: @accent_color;
    transition: border-color 150ms ease;
}

entry:focus {
    border-color: @accent_color;
    box-shadow: 0 0 0 1px alpha(@accent_color, 0.25);
}

entry:disabled {
    opacity: 0.45;
}

entry selection {
    background-color: @selection_bg;
    color: @selection_fg;
}

entry image {
    color: @fg_dim;
}


/* --------------- Text View --------------- */

textview,
textview text {
    background-color: @bg_color;
    color: @fg_color;
}

textview text selection {
    background-color: @selection_bg;
    color: @selection_fg;
}


/* --------------- Labels & Links --------------- */

label {
    color: @fg_color;
}

label.dim-label {
    color: @fg_dim;
}

label:disabled {
    color: @fg_dim;
}

*:link,
button:link {
    color: @link_color;
}

*:visited {
    color: @link_visited;
}


/* --------------- Menus / Popovers --------------- */

menu,
.menu,
.context-menu {
    background-color: @bg_lighter;
    color: @fg_color;
    border: 1px solid @border_color;
    border-radius: 8px;
    padding: 4px 0;
}

menuitem,
.menu item {
    padding: 6px 12px;
    border-radius: 4px;
    margin: 2px 4px;
    min-height: 22px;
}

menuitem:hover,
.menu item:hover {
    background-color: alpha(@accent_color, 0.15);
    color: @fg_bright;
}

separator {
    background-color: @border_color;
    min-height: 1px;
    min-width: 1px;
    margin: 4px 0;
}

popover,
popover.background {
    background-color: @bg_lighter;
    color: @fg_color;
    border: 1px solid @border_color;
    border-radius: 10px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.35);
}

popover > contents {
    background-color: @bg_lighter;
    border-radius: 10px;
    padding: 4px;
}


/* --------------- Scrollbars --------------- */

scrollbar {
    background-color: transparent;
}

scrollbar slider {
    background-color: @scrollbar_bg;
    border-radius: 100px;
    min-width: 6px;
    min-height: 6px;
    margin: 2px;
    transition: all 200ms ease;
}

scrollbar slider:hover {
    background-color: @scrollbar_hover;
    min-width: 8px;
}

scrollbar slider:active {
    background-color: alpha(@accent_color, 0.5);
}

scrollbar.overlay-indicator:not(.dragging):not(.hovering) slider {
    min-width: 4px;
    min-height: 4px;
}


/* --------------- Sidebar / Navigation --------------- */

.sidebar,
.sidebar .view,
placessidebar,
placessidebar .view {
    background-color: @sidebar_bg;
    color: @sidebar_fg;
}

.sidebar row,
placessidebar row {
    border-radius: 6px;
    margin: 1px 6px;
    padding: 4px 8px;
}

.sidebar row:selected,
placessidebar row:selected {
    background-color: alpha(@accent_color, 0.2);
    color: @accent_color;
}

.sidebar row:hover,
placessidebar row:hover {
    background-color: alpha(@fg_color, 0.06);
}


/* --------------- Views / TreeView / List --------------- */

treeview,
.view {
    background-color: @bg_color;
    color: @fg_color;
}

treeview:selected,
.view:selected,
row:selected {
    background-color: alpha(@accent_color, 0.2);
    color: @fg_bright;
}

treeview:hover,
row:hover {
    background-color: alpha(@fg_color, 0.04);
}

treeview header button {
    background-color: @bg_lighter;
    color: @fg_dim;
    border-bottom: 1px solid @border_color;
    border-radius: 0;
    font-weight: bold;
}

list,
listview {
    background-color: @bg_color;
    color: @fg_color;
}

row {
    padding: 4px 8px;
    transition: background-color 100ms ease;
}


/* --------------- Notebook / Tabs --------------- */

notebook {
    background-color: @bg_color;
}

notebook > header {
    background-color: @bg_darker;
    border-color: @border_color;
}

notebook > header tab {
    background-color: transparent;
    color: @fg_dim;
    padding: 6px 16px;
    border-bottom: 2px solid transparent;
    margin-bottom: -1px;
    transition: all 150ms ease;
}

notebook > header tab:checked {
    color: @accent_color;
    border-bottom-color: @accent_color;
    background-color: alpha(@accent_color, 0.06);
}

notebook > header tab:hover:not(:checked) {
    color: @fg_color;
    background-color: alpha(@fg_color, 0.04);
}

notebook > stack {
    background-color: @bg_color;
}


/* --------------- Stack Switcher --------------- */

stackswitcher button {
    border-radius: 0;
    border-bottom: 2px solid transparent;
}

stackswitcher button:checked {
    background-color: alpha(@accent_color, 0.08);
    border-bottom-color: @accent_color;
    color: @accent_color;
}


/* --------------- Switch (Toggle) --------------- */

switch {
    background-color: @bg_active;
    border: 1px solid @border_color;
    border-radius: 100px;
    min-width: 48px;
    min-height: 24px;
    transition: all 200ms ease;
}

switch:checked {
    background-color: @accent_color;
    border-color: @accent_color;
}

switch slider {
    background-color: @fg_color;
    border-radius: 100px;
    min-width: 20px;
    min-height: 20px;
    margin: 1px;
    transition: all 200ms ease;
}

switch:checked slider {
    background-color: @accent_fg;
}


/* --------------- Check / Radio Buttons --------------- */

checkbutton,
radiobutton {
    color: @fg_color;
    padding: 2px 0;
}

check,
radio {
    background-color: @bg_darker;
    border: 2px solid @border_color;
    min-width: 18px;
    min-height: 18px;
    margin: 0 6px 0 0;
    -gtk-icon-source: none;
    color: transparent;
    transition: all 150ms ease;
}

check {
    border-radius: 4px;
}

radio {
    border-radius: 50%;
}

check:checked {
    border-color: @accent_color;
    color: @accent_color;
    -gtk-icon-source: -gtk-icontheme('object-select-symbolic');
}

check:indeterminate {
    border-color: @accent_color;
    color: @accent_color;
    -gtk-icon-source: -gtk-icontheme('list-remove-symbolic');
}

radio:checked {
    border-color: @accent_color;
    color: @accent_color;
    -gtk-icon-source: -gtk-icontheme('media-record-symbolic');
    -gtk-icon-transform: scale(0.5);
}

radio:indeterminate {
    border-color: @accent_color;
    color: @accent_color;
    -gtk-icon-source: -gtk-icontheme('list-remove-symbolic');
}

check:hover,
radio:hover {
    border-color: @accent_color;
}

check:disabled,
radio:disabled {
    opacity: 0.45;
}

/* Reset check/radio styling inside menus so app menus (Chrome etc.) render cleanly */
menuitem check,
menuitem radio,
modelbutton check,
modelbutton radio {
    background-color: transparent;
    border: none;
    min-width: 0;
    min-height: 0;
    margin: 0;
    -gtk-icon-source: unset;
    color: @fg_color;
}

menuitem check:checked,
menuitem radio:checked,
modelbutton check:checked,
modelbutton radio:checked {
    color: @accent_color;
    -gtk-icon-source: -gtk-icontheme('object-select-symbolic');
}


/* --------------- Scales / Sliders --------------- */

scale {
    padding: 10px 0;
}

scale trough {
    background-color: @bg_active;
    border-radius: 100px;
    min-height: 6px;
    min-width: 6px;
}

scale highlight {
    background-color: @accent_color;
    border-radius: 100px;
    min-height: 6px;
}

scale slider {
    background-color: @fg_bright;
    border-radius: 50%;
    min-width: 18px;
    min-height: 18px;
    margin: -7px;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
    transition: all 150ms ease;
}

scale slider:hover {
    background-color: #FFFFFF;
}

scale slider:active {
    background-color: @accent_color;
}


/* --------------- Progress Bar --------------- */

progressbar trough {
    background-color: @bg_active;
    border-radius: 100px;
    min-height: 6px;
}

progressbar progress {
    background-color: @accent_color;
    border-radius: 100px;
    min-height: 6px;
}

levelbar trough {
    background-color: @bg_active;
    border-radius: 4px;
}

levelbar block.filled {
    background-color: @accent_color;
    border-radius: 4px;
}

levelbar block.empty {
    background-color: @bg_active;
}


/* --------------- Spin Button --------------- */

spinbutton {
    background-color: @bg_darker;
    border: 1px solid @border_color;
    border-radius: 6px;
    color: @fg_color;
}

spinbutton button {
    background: transparent;
    border: none;
    border-radius: 0;
    color: @fg_dim;
}

spinbutton button:hover {
    color: @accent_color;
    background-color: alpha(@accent_color, 0.1);
}


/* --------------- Combo Box --------------- */

combobox button {
    background-color: @bg_darker;
    border: 1px solid @border_color;
}

combobox button:hover {
    border-color: @accent_color;
}

combobox arrow {
    color: @fg_dim;
    min-width: 16px;
    min-height: 16px;
}


/* --------------- Tooltips --------------- */

tooltip,
tooltip.background {
    background-color: @tooltip_bg;
    color: @tooltip_fg;
    border: 1px solid @border_color;
    border-radius: 6px;
    padding: 4px 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}


/* --------------- Info Bars --------------- */

infobar {
    border: none;
    border-radius: 0;
}

infobar.info {
    background-color: alpha(@blue, 0.15);
    color: @blue;
}

infobar.warning {
    background-color: alpha(@yellow, 0.15);
    color: @yellow;
}

infobar.error {
    background-color: alpha(@red, 0.15);
    color: @red;
}

infobar.question {
    background-color: alpha(@purple, 0.15);
    color: @purple;
}


/* --------------- Dialogs --------------- */

messagedialog {
    background-color: @bg_lighter;
}

messagedialog .titlebar {
    background-color: @bg_darker;
    min-height: 20px;
}

messagedialog .dialog-action-area button {
    border-radius: 0;
    border-right: 1px solid @border_color;
    padding: 10px;
}

messagedialog .dialog-action-area button:last-child {
    border-right: none;
}


/* --------------- Toolbar --------------- */

toolbar {
    background-color: @bg_lighter;
    border-bottom: 1px solid @border_color;
    padding: 2px 4px;
}

toolbar button {
    background: transparent;
    border-color: transparent;
}

toolbar button:hover {
    background-color: alpha(@fg_color, 0.1);
}


/* --------------- Statusbar --------------- */

statusbar {
    background-color: @bg_darker;
    color: @fg_dim;
    padding: 2px 8px;
    border-top: 1px solid @border_darker;
}


/* --------------- Frame / Card --------------- */

frame {
    border: 1px solid @border_color;
    border-radius: 8px;
}

frame > border {
    border: none;
}

.card {
    background-color: @card_bg;
    border: 1px solid @card_border;
    border-radius: 10px;
    padding: 12px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
}


/* --------------- Calendar --------------- */

calendar {
    background-color: @bg_lighter;
    color: @fg_color;
    border: 1px solid @border_color;
    border-radius: 8px;
    padding: 4px;
}

calendar:selected {
    background-color: @accent_color;
    color: @accent_fg;
    border-radius: 50%;
}

calendar.header {
    color: @fg_bright;
}

calendar.highlight {
    color: @accent_color;
}

calendar:indeterminate {
    color: @fg_dim;
}


/* --------------- Expander --------------- */

expander title {
    color: @fg_color;
    min-height: 32px;
}

expander arrow {
    color: @fg_dim;
    min-width: 16px;
    min-height: 16px;
}


/* --------------- Search Bar --------------- */

searchbar {
    background-color: @bg_darker;
    border-bottom: 1px solid @border_color;
    padding: 4px;
}

searchbar entry {
    background-color: @bg_color;
}


/* --------------- Paned --------------- */

paned > separator {
    background-color: @border_color;
    min-width: 1px;
    min-height: 1px;
}

paned > separator:hover {
    background-color: @accent_color;
}


/* --------------- Spinner --------------- */

spinner {
    color: @accent_color;
}


/* --------------- Selection Mode --------------- */

.selection-mode headerbar,
.selection-mode .titlebar {
    background-color: @accent_color;
    color: @accent_fg;
}


/* --------------- OSD (On-Screen Display) --------------- */

.osd {
    background-color: alpha(@bg_darker, 0.9);
    color: @fg_color;
    border: 1px solid @border_color;
    border-radius: 8px;
}


/* --------------- Nautilus / File Manager Specifics --------------- */

.nautilus-window .sidebar {
    background-color: @sidebar_bg;
}

.nautilus-window placessidebar {
    background-color: @sidebar_bg;
}

.nautilus-window .floating-bar {
    background-color: alpha(@bg_lighter, 0.9);
    color: @fg_color;
    border: 1px solid @border_color;
    border-radius: 4px;
    padding: 4px 10px;
}

.nautilus-canvas-item {
    border-radius: 4px;
}


/* --------------- Terminal Specifics --------------- */

vte-terminal,
terminal-window {
    background-color: @bg_color;
    color: @fg_color;
    padding: 4px;
}


/* --------------- GNOME Text Editor --------------- */

.gnome-text-editor {
    background-color: @bg_color;
}


/* --------------- Misc Overrides --------------- */

.app-notification {
    background-color: @bg_lighter;
    border: 1px solid @border_color;
    border-radius: 8px;
    padding: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.content-view {
    background-color: @bg_color;
}

.monospace {
    font-family: "JetBrainsMono Nerd Font", "JetBrains Mono", monospace;
}

actionbar {
    background-color: @bg_darker;
    border-top: 1px solid @border_color;
    padding: 4px;
}

/* Ensure no white flashes on dark theme */
window.solid-csd,
window.csd {
    background-color: @bg_color;
}
